(this.webpackJsonpwouldyourather=this.webpackJsonpwouldyourather||[]).push([[0],{36:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),a=n(18),s=n.n(a),c=(n(36),n(26)),i=n(27),u=n(28),j=n(31),d=n(4),b=n(11),l=n(6),h=n(2),O={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"/images/sarah.png",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"/images/tyler.png",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"/images/dan.png",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},p={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function v(e){return new Promise((function(t,n){var o=e.author,r=function(e){var t=e.optionOneText,n=e.optionTwoText,o=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:o,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:n}}}(e);setTimeout((function(){p=Object(h.a)(Object(h.a)({},p),{},Object(l.a)({},r.id,r)),O=Object(h.a)(Object(h.a)({},O),{},Object(l.a)({},o,Object(h.a)(Object(h.a)({},O[o]),{},{questions:O[o].questions.concat([r.id])}))),t(r)}),1e3)}))}function x(e){return function(e){var t=e.authedUser,n=e.qid,o=e.answer;return new Promise((function(e,r){setTimeout((function(){O=Object(h.a)(Object(h.a)({},O),{},Object(l.a)({},t,Object(h.a)(Object(h.a)({},O[t]),{},{answers:Object(h.a)(Object(h.a)({},O[t].answers),{},Object(l.a)({},n,o))}))),p=Object(h.a)(Object(h.a)({},p),{},Object(l.a)({},n,Object(h.a)(Object(h.a)({},p[n]),{},Object(l.a)({},o,Object(h.a)(Object(h.a)({},p[n][o]),{},{votes:p[n][o].votes.concat([t])}))))),e()}),500)}))}(e)}var m=n(12),f=n.n(m),g="RECEIVE_QUESTIONS",w="SAVE_QUESTION",y="SAVE_QUESTION_ANSWER";function q(e,t){return function(n,o){var r,a=o().authedUser;return n(m.showLoading),(r={optionOneText:e,optionTwoText:t,author:a},v(r)).then((function(e){return n(function(e){return{type:w,question:e}}(e))})).then((function(){return n(m.hideLoading)})).catch((function(){alert("Error Adding Question!")}))}}function T(e,t){return function(n,o){var r=o().authedUser;return n(Object(m.showLoading)()),x({qid:e,authedUser:r,answer:t}).then((function(){return n(function(e){var t=e.authedUser,n=e.qid,o=e.answer;return{type:y,authedUser:t,qid:n,answer:o}}({qid:e,authedUser:r,answer:t}))})).then((function(){return n(Object(m.hideLoading)())})).catch((function(){alert("Error Adding Answer!")}))}}var U="RECEIVE_USERS";function N(){return function(e){return e(Object(m.showLoading)()),Promise.all([new Promise((function(e,t){setTimeout((function(){return e(Object(h.a)({},O))}),1e3)})),new Promise((function(e,t){setTimeout((function(){return e(Object(h.a)({},p))}),1e3)}))]).then((function(e){var t=Object(b.a)(e,2);return{users:t[0],questions:t[1]}})).then((function(t){var n=t.users,o=t.questions;e(function(e){return{type:U,users:e}}(n)),e(function(e){return{type:g,questions:e}}(o)),e(Object(m.hideLoading)())})).catch((function(){alert("Error!")}))}}var S=n(13),R="SET_AUTHED_USER";function L(e){return{type:R,id:e}}var k=n(0),E=Object(d.connect)((function(e){var t=e.authedUser,n=e.users;return{authedUser:n[t].name,avatarURL:n[t].avatarURL}}))((function(e){var t=e.dispatch,n=e.authedUser,o=e.avatarURL;return Object(k.jsxs)("div",{className:"navbar",children:[Object(k.jsx)("h2",{children:"Would You Rather...?"}),Object(k.jsxs)("div",{className:"links",children:[Object(k.jsx)(S.b,{to:"/",children:" Home "}),Object(k.jsx)(S.b,{to:"/add",children:" New Question"}),Object(k.jsx)(S.b,{to:"/leaderboard",children:"Leaderboard"})]}),Object(k.jsxs)("div",{className:"links",children:[Object(k.jsx)("span",{children:n}),Object(k.jsx)("img",{src:o,alt:"Avatar of ".concat(n),className:"avatar"}),Object(k.jsx)("button",{onClick:function(e){e.preventDefault(),t(L(null))},children:"Logout"})]})]})}));function z(e,t){var n=e.id,o=e.optionOne,r=e.timestamp,a=t.name,s=t.avatarURL;return{author:a,id:n,text:o.text,avatarURL:s,timestamp:r}}var A=function(){return Object(k.jsx)("div",{className:"app",children:Object(k.jsxs)("div",{className:"center",children:["404 Page NOT Found",Object(k.jsx)(S.b,{to:"/",children:"Return Home..."})]})})},C=Object(d.connect)((function(e,t){var n=e.authedUser,o=e.users,r=e.questions[t.id];return{question:r?z(r,o[r.author]):null,authedUser:r?n:null}}))((function(e){var t=e.question;if(null===t)return Object(k.jsx)(A,{});var n=t.author,o=t.avatarURL,r=t.text,a=t.id;return Object(k.jsxs)("div",{className:"login",children:[Object(k.jsx)("img",{src:o,alt:"Avatar of ".concat(n),className:"avatar"}),Object(k.jsx)("span",{children:n}),Object(k.jsxs)("p",{children:[r,"..."]}),Object(k.jsx)(S.b,{to:"/questions/".concat(a),children:Object(k.jsx)("button",{children:"view poll"})})]})})),Q=Object(d.connect)((function(e){var t=e.users,n=e.authedUser,o=e.questions,r=Object.keys(t[n].answers);return{answeredQuestions:Object.values(o).filter((function(e){return r.includes(e.id)})).sort((function(e,t){return t.timestamp-e.timestamp})),unansweredQuestions:Object.values(o).filter((function(e){return!r.includes(e.id)})).sort((function(e,t){return t.timestamp-e.timestamp}))}}))((function(e){var t=Object(o.useState)(!1),n=Object(b.a)(t,2),r=n[0],a=n[1],s=e.answeredQuestions,c=e.unansweredQuestions,i=function(e){"Unanswered Questions"===e.target.innerHTML?a(!1):"Answered Questions"===e.target.innerHTML&&a(!0)};return Object(k.jsx)("div",{className:"app",children:Object(k.jsx)("div",{className:"header",children:Object(k.jsxs)("div",{className:"links center",children:[Object(k.jsx)("button",{onClick:i,children:"Unanswered Questions"}),Object(k.jsx)("button",{onClick:i,children:"Answered Questions"}),Object(k.jsxs)("ul",{className:"List",children:[r&&s.map((function(e){return Object(k.jsx)("li",{children:Object(k.jsx)(C,{id:e.id})},e.id)})),!r&&c.map((function(e){return Object(k.jsx)("li",{children:Object(k.jsx)(C,{id:e.id})},e.id)}))]})]})})})})),D=n(5),F=Object(d.connect)()((function(e){var t=Object(o.useState)(""),n=Object(b.a)(t,2),r=n[0],a=n[1],s=Object(o.useState)(""),c=Object(b.a)(s,2),i=c[0],u=c[1],j=Object(o.useState)(!1),d=Object(b.a)(j,2),l=d[0],h=d[1],O=e.dispatch;return!0===l?Object(k.jsx)(D.a,{to:"/"}):Object(k.jsxs)("div",{className:"create",children:[Object(k.jsx)("h2",{children:" Create New Question"}),Object(k.jsx)("p",{children:"Would You Rather..."}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O(q(r,i)),a(""),u(""),h(!0)},children:[Object(k.jsx)("input",{type:"text",placeholder:"Option one",onChange:function(e){return a(e.target.value)},value:r}),Object(k.jsx)("strong",{children:"OR"}),Object(k.jsx)("input",{type:"text",placeholder:"Option two",onChange:function(e){return u(e.target.value)},value:i}),Object(k.jsx)("button",{type:"submit",disabled:""===r||""===i,children:"Submit"})]})]})})),P=Object(d.connect)((function(e){var t=e.users;return{users:Object.keys(t).map((function(e){return{id:t[e].id,avatar:t[e].avatarURL,name:t[e].name,answered:Object.keys(t[e].answers).length,created:t[e].questions.length}})).sort((function(e,t){var n=e.answered+e.created;return t.answered+t.created-n}))}}))((function(e){var t=e.users;return Object(k.jsx)("div",{children:t.map((function(e){return Object(k.jsx)("li",{children:Object(k.jsxs)("div",{className:"login",children:[Object(k.jsx)("img",{src:e.avatar,alt:"Avatar of ".concat(e.name),className:"avatar"}),Object(k.jsx)("span",{children:Object(k.jsx)("strong",{children:e.name})}),Object(k.jsxs)("div",{children:[Object(k.jsxs)("h5",{children:["Answered Question: ",e.answered]}),Object(k.jsxs)("h5",{children:["Created Question: ",e.created]}),Object(k.jsxs)("h5",{children:["Score: ",e.answered+e.created]})]})]})},e.id)}))})})),_=Object(d.connect)((function(e,t){var n=e.users,o=e.questions,r=e.authedUser,a=t.id,s={author:o[a].author,optionOne:o[a].optionOne.text,optionTwo:o[a].optionTwo.text,voteOne:o[a].optionOne.votes.length,voteTwo:o[a].optionTwo.votes.length},c=n[r].answers[a];return{question:s,author:n[s.author],myVote:c}}))((function(e){var t=e.myVote,n=e.question,o=e.author,r=n.voteOne+n.voteTwo,a=(n.voteOne/r*100).toFixed(1),s=(n.voteTwo/r*100).toFixed(1);return Object(k.jsxs)("div",{className:"poll",children:[Object(k.jsx)("img",{src:o.avatarURL,alt:"Avatar of ".concat(o.name),className:"avatar"}),Object(k.jsxs)("p",{children:[" Asked by: ",o.name]}),Object(k.jsx)("h5",{children:Object(k.jsx)("strong",{children:"Results: "})}),Object(k.jsxs)("div",{className:"poll",children:["optionOne"===t&&Object(k.jsx)("span",{className:"btn btn-danger",children:" Your Vote "}),Object(k.jsx)("p",{children:n.optionOne}),Object(k.jsxs)("p",{children:[" about: ",a,"% "]}),Object(k.jsxs)("p",{children:[n.voteOne," out of ",r," votes"]})]}),Object(k.jsxs)("div",{className:"poll",children:["optionTwo"===t&&Object(k.jsx)("span",{className:"btn btn-danger",children:" Your Vote "}),Object(k.jsx)("p",{children:n.optionTwo}),Object(k.jsxs)("p",{children:[" about: ",s,"% "]}),Object(k.jsxs)("p",{children:[n.voteTwo," out of ",r," votes"]})]})]})})),V=Object(d.connect)((function(e,t){var n=e.users,o=e.questions,r=t.id;return{question:o[r]?o[r]:null,author:o[r]?n[o[r].author]:null}}))((function(e){var t=e.author,n=e.question,r=e.id,a=e.dispatch,s=Object(o.useState)(""),c=Object(b.a)(s,2),i=c[0],u=c[1];if(null===n)return Object(k.jsx)(A,{});n={author:n.author,optionOne:n.optionOne.text,optionTwo:n.optionTwo.text,voteOne:n.optionOne.votes.length,voteTwo:n.optionTwo.votes.length};return Object(k.jsxs)("div",{className:"poll",children:[Object(k.jsx)("img",{src:t.avatarURL,alt:"Avatar of ".concat(t.name),className:"avatar"}),Object(k.jsxs)("p",{children:[" ",t.name," asks: "]}),Object(k.jsx)("h3",{children:" Would You Rather..."}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(T(r,i)),u("")},children:[Object(k.jsx)("input",{type:"radio",id:"one",name:"option",value:"optionOne",onChange:function(e){return u(e.target.value)}}),Object(k.jsx)("label",{htmlFor:"one",children:n.optionOne}),Object(k.jsx)("br",{}),Object(k.jsx)("input",{type:"radio",id:"two",name:"option",value:"optionTwo",onChange:function(e){return u(e.target.value)}}),Object(k.jsx)("label",{htmlFor:"two",children:n.optionTwo}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{disabled:""===i,children:" Submit "})]})]})})),I=Object(d.connect)((function(e){var t=e.users,n=e.authedUser;return{answered:Object.keys(t[n].answers)}}))((function(e){var t=Object(D.g)().question_id,n=e.answered.includes(t);return Object(k.jsx)("div",{children:n?Object(k.jsx)(_,{id:t}):Object(k.jsx)(V,{id:t})})})),M=Object(d.connect)()((function(e){return Object(k.jsx)(S.a,{children:Object(k.jsxs)("div",{className:"content",children:[Object(k.jsx)(E,{}),Object(k.jsx)("h2",{className:"center",children:" Would You Rather...?"}),Object(k.jsxs)(D.d,{children:[Object(k.jsx)(D.b,{exact:!0,path:"/",children:Object(k.jsx)(Q,{})}),Object(k.jsx)(D.b,{path:"/add",children:Object(k.jsx)(F,{})}),Object(k.jsx)(D.b,{path:"/leaderboard",children:Object(k.jsx)(P,{})}),Object(k.jsx)(D.b,{path:"/questions/:question_id",children:Object(k.jsx)(I,{})}),Object(k.jsx)(D.b,{children:Object(k.jsx)(A,{})})]})]})})})),Y=Object(d.connect)((function(e){var t=e.users;return{users:Object.keys(t).map((function(e){return{id:t[e].id,name:t[e].name}}))}}))((function(e){var t=e.dispatch,n=e.users,r=Object(o.useState)(""),a=Object(b.a)(r,2),s=a[0],c=a[1];return Object(k.jsxs)("div",{className:"login",children:[Object(k.jsx)("h3",{children:"Would You Rather App! "}),Object(k.jsx)("h4",{children:" Sign in "}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(L(s)),c("")},children:[Object(k.jsxs)("select",{onChange:function(e){return c(e.target.value)},children:[Object(k.jsx)("option",{value:"",children:" Select User "}),n.map((function(e){return Object(k.jsxs)("option",{value:e.id,children:["  ",e.name]})}))]}),Object(k.jsx)("br",{}),Object(k.jsx)("button",{type:"submit",disabled:""===s,children:"Sign in"})]})]})})),W=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(N())}},{key:"render",value:function(){return Object(k.jsxs)("div",{className:"app",children:[Object(k.jsx)(f.a,{}),this.props.load?null:!0===this.props.loading?Object(k.jsx)(Y,{}):Object(k.jsx)(M,{})]})}}]),n}(o.Component);var B=Object(d.connect)((function(e){return{loading:null===e.authedUser,load:e.loadingBar.default}}))(W),H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),o(e),r(e),a(e),s(e)}))},J=n(15);var $=Object(J.b)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===R?t.id:e},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(h.a)(Object(h.a)({},e),t.users);case w:var n=t.question;return Object(h.a)(Object(h.a)({},e),{},Object(l.a)({},n.author,Object(h.a)(Object(h.a)({},e[n.author]),{},{questions:e[n.author].questions.concat([n.id])})));case y:var o=t.answer,r=t.authedUser,a=t.qid;return Object(h.a)(Object(h.a)({},e),{},Object(l.a)({},r,Object(h.a)(Object(h.a)({},e[r]),{},{answers:Object(h.a)(Object(h.a)({},e[r].answers),{},Object(l.a)({},a,o))})));default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(h.a)(Object(h.a)({},e),t.questions);case w:var n=t.question;return Object(h.a)(Object(h.a)({},e),{},Object(l.a)({},n.id,n));case y:var o=t.authedUser,r=t.qid,a=t.answer;return Object(h.a)(Object(h.a)({},e),{},Object(l.a)({},r,Object(h.a)(Object(h.a)({},e[r]),{},Object(l.a)({},a,Object(h.a)(Object(h.a)({},e[r][a]),{},{votes:e[r][a].votes.concat([o])})))));default:return e}},loadingBar:m.loadingBarReducer}),G=n(30),K=function(e){return function(t){return function(n){console.group(n.type),console.log("The action: ",n);var o=t(n);return console.log("The new state: ",e.getState()),console.groupEnd(),o}}},X=Object(J.a)(G.a,K),Z=(n(45),Object(J.c)($,X));s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(d.Provider,{store:Z,children:Object(k.jsx)(B,{})})}),document.getElementById("root")),H()}},[[46,1,2]]]);
//# sourceMappingURL=main.0cff807b.chunk.js.map